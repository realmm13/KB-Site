---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';
import { getPosts } from '../../lib/rss';

const posts = await getPosts();
---

<BaseLayout
  title="Writing"
  description="Essays exploring identity, purpose, and rejecting society's default rules."
>
  <section class="py-16 lg:py-24">
    <div class="container">
      <!-- Header -->
      <div class="max-w-2xl mb-12 lg:mb-16">
        <p class="font-sans text-sm tracking-widest uppercase text-muted mb-4">
          Writing
        </p>
        <h1 class="text-4xl lg:text-5xl font-serif font-medium text-charcoal leading-tight">
          Essays & Reflections
        </h1>
        <p class="mt-6 text-lg text-muted leading-relaxed">
          Explorations on identity, purpose, and the messy work of becoming yourself.
          All essays are published on Substack.
        </p>
      </div>

      <!-- Posts Grid -->
      {posts.length > 0 ? (
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10">
          {posts.map((post) => (
            <PostCard
              title={post.title}
              excerpt={post.excerpt}
              date={post.pubDate}
              link={post.link}
              image={post.image}
            />
          ))}
        </div>
      ) : (
        <div class="text-center py-16">
          <p class="text-muted text-lg">
            No posts available yet. Check back soon!
          </p>
          <a
            href="https://stillsmall.substack.com"
            target="_blank"
            rel="noopener noreferrer"
            class="mt-4 inline-flex items-center gap-2 font-sans text-sm tracking-widest uppercase text-charcoal hover:text-accent transition-colors duration-300"
          >
            Visit Substack
            <svg
              class="w-4 h-4"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25" />
            </svg>
          </a>
        </div>
      )}
    </div>
  </section>
</BaseLayout>
