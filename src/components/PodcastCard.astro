---
import { formatDate } from '../lib/rss';

interface Props {
  title: string;
  excerpt: string;
  date: string;
  link: string;
  duration?: string;
}

const { title, excerpt, date, link, duration } = Astro.props;
---

<article class="group">
  <a
    href={link}
    target="_blank"
    rel="noopener noreferrer"
    class="block p-6 lg:p-8 border border-border hover:border-charcoal/30 transition-colors duration-300"
  >
    <div class="flex items-start gap-5">
      <!-- Podcast Icon -->
      <div class="flex-shrink-0 w-12 h-12 bg-charcoal text-cream flex items-center justify-center">
        <svg
          class="w-5 h-5"
          fill="currentColor"
          viewBox="0 0 24 24"
        >
          <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
          <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
        </svg>
      </div>

      <!-- Content -->
      <div class="flex-1 min-w-0">
        <div class="flex items-center gap-3 text-xs font-sans tracking-wide text-muted uppercase">
          <span>Podcast</span>
          <span class="w-1 h-1 rounded-full bg-border"></span>
          <time>{formatDate(date)}</time>
          {duration && (
            <>
              <span class="w-1 h-1 rounded-full bg-border"></span>
              <span>{duration}</span>
            </>
          )}
        </div>

        <h3 class="mt-2 text-xl font-serif font-medium text-charcoal leading-snug group-hover:text-accent transition-colors duration-300">
          {title}
        </h3>

        <p class="mt-2 text-muted leading-relaxed line-clamp-2">
          {excerpt}
        </p>

        <span class="mt-4 inline-flex items-center gap-2 font-sans text-xs tracking-widest uppercase text-muted group-hover:text-charcoal transition-colors duration-300">
          Listen now
          <svg
            class="w-3 h-3 transform transition-transform duration-300 group-hover:translate-x-0.5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
          </svg>
        </span>
      </div>
    </div>
  </a>
</article>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
